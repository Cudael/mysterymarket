import { Resend } from "resend";

let _resend: Resend | null = null;

export function getResend(): Resend | null {
  if (!process.env.RESEND_API_KEY) return null;
  if (!_resend) {
    _resend = new Resend(process.env.RESEND_API_KEY);
  }
  return _resend;
}

export const resend = {
  emails: {
    send: (params: Parameters<Resend["emails"]["send"]>[0]) => {
      const client = getResend();
      if (!client) return Promise.resolve({ data: null, error: null });
      return client.emails.send(params);
    },
  },
};
